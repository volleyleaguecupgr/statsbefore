<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Volleyball Match Stats Overlay</title>
    <style>
        /* CSS is unchanged from the previous version, focusing on glassmorphism and layout */

        /* Variables and Global Reset */
        :root {
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --pink-accent: #E91E63;
            --font-color: #f0f0f0;
            --header-font: 'Arial Black', sans-serif;
            --body-font: 'Arial', sans-serif;
        }

        body {
            width: 1920px;
            height: 1080px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 0;
            background-color: transparent;
            font-family: var(--body-font);
            color: var(--font-color);
            overflow: hidden;
        }

        /* --- Main Card Container --- */
        .stats-card {
            width: 1000px;
            height: 700px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            padding: 30px;
            display: flex;
            flex-direction: column;
        }

        /* --- Header Section (Team Logos/Names) --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
        }

        .team-name {
            font-family: var(--header-font);
            font-size: 36px;
            margin: 0 20px;
            text-shadow: 2px 2px 5px #000000;
        }

        .home-side { text-align: left; }
        .away-side { text-align: right; }
        .middle-title {
            font-family: var(--header-font);
            font-size: 40px;
            color: var(--pink-accent);
            text-shadow: 0 0 10px rgba(233, 30, 99, 0.8);
        }

        hr {
            border: 0;
            height: 1px;
            background-image: linear-gradient(to right, transparent, var(--glass-border), transparent);
            margin: 10px 0;
        }

        /* --- Stats Grid --- */
        .stats-grid {
            flex-grow: 1;
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr;
            align-items: center;
            gap: 5px 0;
            padding-top: 20px;
        }

        .stat-row {
            display: contents;
        }

        /* Stat Labels (Middle Column) */
        .stat-label {
            background-color: var(--pink-accent);
            padding: 10px 15px;
            text-align: center;
            font-weight: bold;
            font-size: 20px;
            letter-spacing: 1px;
            text-transform: uppercase;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Stat Values (Side Columns) */
        .stat-value {
            padding: 10px 20px;
            font-size: 28px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 5px;
        }

        .stat-value.home {
            text-align: right;
            border-right: none;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .stat-value.away {
            text-align: left;
            border-left: none;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        /* --- Footer Section --- */
        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }

    </style>
</head>
<body>

    <div class="stats-card">

        <div class="header">
            <div class="home-side">
                <span class="team-name" id="home-team-name">Loading...</span>
            </div>
            <div class="middle-title">
                üèê STATS üìä
            </div>
            <div class="away-side">
                <span class="team-name" id="away-team-name">Loading...</span>
            </div>
        </div>

        <hr>

        <div class="stats-grid" id="stats-grid">
            <p style="grid-column: 1 / 4; text-align: center;">Loading match statistics...</p>
        </div>

        <hr>

        <div class="footer">
            Match: <span id="match-datetime"></span> | Source: <span id="match-source">W RISING STARS</span>
        </div>

    </div>

    <script>
        // --- Configuration ---
        const JSON_PATH = 'stats.json'; // The path to your external JSON file

        // --- Data Fetching and Population ---
        async function fetchAndPopulateStats() {
            try {
                // 1. Fetch data from the external path
                const response = await fetch(JSON_PATH);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const jsonData = await response.json();

                // 2. Define the Stat Mapping using the received data
                // This array defines the display label and how to access the corresponding data keys.
                const teamsComparison = jsonData.teams_comparison;
                const statsMap = [
                    { label: 'ATTACK EFFICIENCY*', homeKey: teamsComparison.spikes.efficiency.home, awayKey: teamsComparison.spikes.efficiency.away },
                    { label: 'SPIKES PER SET', homeKey: teamsComparison.spikes.spikes_per_set_home, awayKey: teamsComparison.spikes.spikes_per_set_away },
                    { label: 'BLOCKS PER SET', homeKey: teamsComparison.blocks.blocks_per_set_home, awayKey: teamsComparison.blocks.blocks_per_set_away },
                    { label: 'TOTAL ACES', homeKey: teamsComparison.serve.aces_home, awayKey: teamsComparison.serve.aces_away },
                    { label: 'ACES PER SET', homeKey: teamsComparison.serve.aces_per_set_home, awayKey: teamsComparison.serve.aces_per_set_away },
                    { label: 'RECEPTION EFFICIENCY', homeKey: teamsComparison.reception.reception_eff_home, awayKey: teamsComparison.reception.reception_eff_away },
                    { label: 'PERFECT RECEPTION', homeKey: teamsComparison.reception.reception_perfect_home, awayKey: teamsComparison.reception.reception_perfect_away }
                ];

                // 3. Populate Header and Footer
                document.getElementById('home-team-name').textContent = jsonData.match_info.home_team;
                document.getElementById('away-team-name').textContent = jsonData.match_info.away_team;
                
                const matchDate = jsonData.match_info.datetime.split(' - ')[0];
                document.getElementById('match-datetime').textContent = matchDate;

                // 4. Populate Stats Grid
                const grid = document.getElementById('stats-grid');
                grid.innerHTML = ''; // Clear the "Loading..." message
                
                statsMap.forEach(stat => {
                    // Home Value
                    const homeValue = document.createElement('div');
                    homeValue.className = 'stat-value home';
                    homeValue.textContent = stat.homeKey;

                    // Stat Label
                    const label = document.createElement('div');
                    label.className = 'stat-label';
                    label.textContent = stat.label;

                    // Away Value
                    const awayValue = document.createElement('div');
                    awayValue.className = 'stat-value away';
                    awayValue.textContent = stat.awayKey;

                    // Append to grid
                    grid.appendChild(homeValue);
                    grid.appendChild(label);
                    grid.appendChild(awayValue);
                });

            } catch (error) {
                console.error("Failed to load JSON data:", error);
                document.getElementById('stats-grid').innerHTML = '<p style="grid-column: 1 / 4; text-align: center; color: red;">ERROR: Failed to load data. Check console for details.</p>';
            }
        }

        // Run the function when the page loads
        fetchAndPopulateStats();

        // Optional: Re-fetch the data every 5 seconds to keep it live
        // NOTE: If using OBS, you must check the "Refresh browser when scene becomes active" box
        // and optionally use this for continuous updates if the source data is live.
        // setInterval(fetchAndPopulateStats, 5000); 
    </script>
</body>
</html>